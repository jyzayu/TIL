 ### 전송 계층 프로토콜 개요
• 인터넷 네트워크 프로토콜 스택의 응용 계층과 네트워크 계층 사이에 있음

• 서로 다른 호스트 상에서 동작하는 네트워크 응용 프로세스 사이에 논리적인 통신 연결(두 프로세스 사이에 물리적 링크로 연결되지는 않지만
논리적인 연결을 통하여 메시지 전송이 이루어지는 것) 제공
![image](https://github.com/jyzayu/TIL/assets/55649979/4341371c-5446-41a6-98f3-949eab16508d)

• 주요 기본 서비스로 다중화와 역다중화가 있음

### 전송 계층 프로토콜 특징
(1) 종단간(전송 호스트와 수신 호스트 상)에서는 구현되지만
중간 노드(라우터 등) 에서는 구현되지 않음

• 전송노드에서의 전송 계층 동작
- 응용 계층으로부터 메시지를 받아서 세그먼트(segment)로 자르고, 세그먼트 헤더를
붙여서 네트워크 계층으로 전송하는 기능 수행
• 수신 노드에서의 전송 계층 동작
- 네트워크 계층으로부터 수신한 세그먼트의 헤더를 제거하고 메시지로 다시 재조립하여
응용 프로세서로 전송하는 기능 수행

(2) 인터넷 네트워크에서는 최상위 응용 계층의 각 응용들에 대하여 UDP와
TCP, 2개의 서로 다른 특성을 가지는 전송 계층 프로토콜 제공

• UDP(User Datagram Protocol) : 비신뢰적, 비연결성 서비스 제공

• TCP(Transmission Control Protocol) : 신뢰성, 연결 지향적 서비스 제공

[전송 계층 프로토콜의 종류]

 네트워크 애플리케이션을 설계할 때 이 두 프로토콜 중에 하나를 설계하고자 하는 응용의 특성에 맞추어 선택!

예) 파일 전송 관련 응용 – TCP, 오디오/비디오 같은 멀티미디어 전송 관련 응용 – UDP가 적합

(3) 네트워크 종단간 호스트 상에서 동작하는 프로세스와 프로세스 간의 통신을 지원

→ <IP 주소, 포트 번호> 쌍이 필요

• IP 주소를 사용하여 특정 프로세스가 어느 호스트에서 동작하는지를 알 수 있고, 동일한
호스트에는 여러 개의 응용 프로세스가 동작할 수 있기 때문에 특정 프로세스를 구분하기
위해 포트 번호가 필요

• 프로세스 : 웹 응용에서 브라우저 상의 내용 하나하나

예) 어떤 컴퓨터에 4개의 브라우저를 사용하고 있다면 이 컴퓨터에 4개의 프로세스가 동작하고 있음
![image](https://github.com/jyzayu/TIL/assets/55649979/f29efce0-2939-43f4-9f53-341756b71d8a)

### 다중화(Multiplexing)와 역다중화(Demultiplexing)
(1) 다중화와 역다중화의 필요성

• 서로 다른 두 호스트 상에서 동작하는 프로세스들 간에 메시지 교환이 이루어지는 경우

‘호스트-호스트 통신 → 프로세스-프로세스 통신’ 바꾸는 기능 필요

• 각 프로세스는 해당 포트 번호로 구분

• UDP와 TCP 프로토콜의 헤더에는 소스 포트 번호 필드(source port number field)와
목적지 포트 번호 필드(destination port number field)를 가짐

• 포트 번호를 나타내는 필드는 16비트로 이루어짐

• 포트 번호 범위는 0부터 65,535까지
포트 번호 0~1023 = 잘 알려진(well-known) 포트 번호, 다른 응용 프로토콜에서 예약하여 사용

예) 80번 포트 – HTTP 프로토콜, 21번 포트 – FTP 프로토콜 사용
![image](https://github.com/jyzayu/TIL/assets/55649979/2c34fa2a-cab2-4607-9b0b-dae5a1032e56)

(2) 다중화와 역다중화 동작

• 다중화 : 소스 호스트에서 동작하고 잇는 여러 응용 프로세스로부터 데이터를 모으고

헤더를 첨가하여 세그먼트로 만든 후 네트워크 계층으로 세그먼트를 보내는 일
- 소스 호스트에서 실행
- 수신자 호스트에서 네트워크 계층으로부터 수신한 세그먼트는 그 세그먼트가 전달될
목적지 프로세스를 명시하는 구분자인 포트 번호를 가짐
- 수신 호스트의 전송 계층에서 이 포트 번호를 사용하여 해당 응용 프로세스로 보냄
• 역다중화(demultiplexing) : 전송 계층 세그먼트를 해당 응용 프로세스로 보내는 일
- 목적지 호스트에서 실행
![image](https://github.com/jyzayu/TIL/assets/55649979/d5842a70-c575-4612-b472-23f35c1fcbeb)

