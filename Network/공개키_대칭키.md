## 공개키 대칭키
https의 암호화에 대해 이해하기 위해서는 먼저 대칭키와 공개키에 대해 알아야한다.

암호화 복호화에는 암호 알고리즘과 암호키를 사용한다.
암복호화에 사용하는 키가 동일한 암호화 방식을 대칭키(공통키) 방식이라 한다.

암복호화에 사용하는 키가 서로 다르며 송수신자 모두 한 쌍의 키(개인키, 공개키)를 가진다.  
공개해도 되는 공개키와 복호화에 사용하는 개인키로 나누는 방식을 공개키 방식이라 한다.  
대칭키와 달리 갖고있는 키가 비대칭이라 비대칭키 암호화라고도 한다.  



 

## 대칭키란, 장단점
![image](https://github.com/jyzayu/TIL/assets/55649979/d2a2260a-dcb1-4f33-af3a-adb9c1d56272)

대칭키는 위에서 설명한대로 암복호화키가 동일하며 해당 키를 아는 사람만이 문서를 복호화해 볼 수 있게된다.  
대표적인 알고리즘으로는 DES, 3DES, AES, SEED, ARIA 등이 있다. 
 
공개키 암호화 방식에 비해 속도가 빠르다는 장점이 있지만, 키를 교환해야한다는 문제 (키 배송 문제)가 발생한다.  
키를 교환하는 중 키가 탈취될 수 있는 문제도 있고 사람이 증가할수록 전부 따로따로 키교환을 해야하기 때문에 관리해야 할 키가 방대하게 많아진다.

이러한 키 배송 문제를 해결하기 위한 방법으로 키의 사전 공유에 의한 해결, 키 배포센터에 의한 해결,  
Diffie-Hellman 키 교환에 의한 해결, 공개키 암호에 의한 해결이 있다.

 

 

대칭키 암호화 방식: 암복호화키가 동일한 암호화 방식  
기밀성을 제공하나, 무결성/인증/부인방지 를 보장하지 않음  
대표 알고리즘 : DES, 3DES, AES, SEED, ARIA 등

장점 : 수행 시간이 짧음  대용량 Data 암호화에 적합하다.

단점 : 안전한 키교환 방식이 요구됨, 사람이 증가할수록 키관리가 어려워짐

 
대칭키 알고리즘은 기밀성을 제공하고, 무결성/인증/부인방지를 제공하지 않는다.


공개키 알고리즘은 기밀성/인증/부인방지 기능을 제공한다.

 

각각의 의미는 아래를 참고하자.

기밀성(Confidentiality): 인가되지 않은 자는 정보를 확인하지 못하도록 하며, 정보가 유출되더라도 평문으로 해독할 수 없고 변조 또는 위조하지 못하도록 기밀을 유지한다.
무결성(Integrity): 인가 되지 않은 자로 부터 위조 또는 변조가 발생하지 않았는지 확인
인증(Authentication): 수신 받은 메시지가 송신자 본인이라는 것을 확인하고 증명한다.
부인 방지(Non-repudiation): 메시지를 보낸 사람이 보낸 사실을 부인하거나, 받은 사람이 받은 사실을 부인할 경우 증명하는 기술을 말한다.
여기서 무결성은 대칭키, 공개키 알고리즘 모두 성립하지 않는다. 따라서 전자 서명(인증서)을 추가함으로써 무결성을 보장한다.
 

## 공개키란
![image](https://github.com/jyzayu/TIL/assets/55649979/962ec648-631a-401a-a0cd-62cc7cd1fca8)

위에서 설명한 대칭키의 키교환 문제를 해결하기 위해 등장한 것이 공개키(비대칭키) 암호화 방식이다.  
이름 그대로 키가 공개되어있기 때문에 키를 교환할 필요가 없어지며 공개키는 모든 사람이 접근 가능한 키이고 개인키는 각 사용자만이 가지고 있는 키이다.  

공개키 암호화 방식: 암복호화키가 동일한 암호화 방식


## 방식  
암호 모드 : 송신자 공개키로 암호화 -> 송신자 사설키로 복호화  
소량의 메시지 암호화 목적, 주로 키 교환의 용도로 사용  
인증 모드 : 송신자 사설키로 암호화 -> 송신자 공개키로 복호화  
메시지를 인증(부인방지)하는 것이 목적  
대표적인 알고리즘  
Diffie Hellman : 최초의 공개키 알고리즘, 위조에 취약  
RSA : 대표적 공개키 알고리즘  
DSA : 전자서명 알고리즘 표준  
ECC : 짧은 키로 높은 암호 강도, 빠른 구현 가능 PDA, 스마트폰등에 사용  

예를 들어, A가 B에게 데이터를 보낸다고 할 때, A는 B의 공개키로 암호화한 데이터를 보내고 B는 본인의 개인키로 해당 암호화된 데이터를 복호화해서 보기 때문에 암호화된 데이터는 B의 공개키에 대응되는 개인키를 갖고 있는 B만이 볼 수 있게 되는 것이다. 

 ![image](https://github.com/jyzayu/TIL/assets/55649979/06d7d25f-9b45-4b98-a97c-29c86ff14747)

* ‘CA(Certificate Authority)’ - 공개키를 저장해주는 신뢰성이 검증된 민간 기업이다. CA로는 코모도 등이 있다.

1) B 공개키/개인키 쌍 생성

2) 공개키 공개(등록) ;;; B는 CA에게 자신이 B임을 증명하고 자신의 공개 키가 B의 공개 키가 맞음을 인증하는 인증서 발급, 개인키는 본인이 소유

3) A가 B의 공개키를 받아옴 ;;;   A에게 B의 공개키가 포함된 이 인증서를 주면, 이를 받은 A는 자신이 신뢰할 수 있는 CA에게 CA가 진짜 발급한 인증서인지 확인하고,

4) A가 B의 공개키를 사용해 데이터를 암호화  ;; 맞으면 그 인증서에 포함된 B의 공개 키로 데이터를 암호화해서 B에게 전달

5) 암호화된 데이터를 B에게 전송

6) B는 암호화된 데이터를 B의 개인키로 복호화 (개인키는 B만 가지고 있기 때문에 B만 볼 수 있음)

만약 최종적으로 B가 올바르게 자신의 개인키로 복호화한다면, CA가 인증하는 B의 공개키에 대응하는 개인키를 가지고 있다는 것이므로,  
이 과정을 통해 현재 통신하고 있는 상대방이 B가 맞음을 인증할 수 있음.

이러한 과정을 통해 우리는 https로 더 안전하게 정보를 주고 받을 수 있게 된다.  
하지만 신뢰할 수 있는 CA가 아니라 자체적으로 인증서를 발급하거나, 신뢰할 수 없는 CA를 통해서 인증서를 발급받을 수도 있기 때문에 항상 안전한 것은 아니다.   
이 경우에도 브라우저는 ‘주의 요함’, ‘이 사이트는 보안 연결(HTTPS)이 사용되지 않았습니다.’ 알림을 준다.  
 
## 공개키 방식 장단점
장점: 키분배 필요X, 기밀성/인증/부인방지 기능을 제공

단점: 대칭키 암호화 방식에 비해 속도가 느림 

따라서 공개키는 키가 공개되어있기 때문에 따로 키교환이나 분배를 할 필요가 없어진다.  
중간 공격자가 B의 공개키를 얻는다고 해도 B의 개인키로만 복호화가 가능하기 때문에 기밀성을 제공하며  
개인키를 가지고있는 수신자만이 암호화된 데이터를 복호화할 수 있으므로 일종의 인증기능도 제공한다는 장점이 있다.  
그에 반해 단점은 속도가 느리다는 것이다. 



 ## 인증성 보장 
 대칭키 -> 공개키 로 인증성을 보장할 수 있다.

참고
 https://velog.io/@gs0351/%EB%8C%80%EC%B9%AD%ED%82%A4-vs-%EA%B3%B5%EA%B0%9C%ED%82%A4%EB%B9%84%EB%8C%80%EC%B9%AD%ED%82%A4  
https://jaehoney.tistory.com/290  
https://tecoble.techcourse.co.kr/post/2021-09-25-https/
