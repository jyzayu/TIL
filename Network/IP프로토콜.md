### 인터넷 프로토콜
• TCP/IP 프로토콜 스택을 가지는 인터넷에서 사용되는 네트워크 계층의 대표 프로토콜
• 현재 대부분 네트워크에서 IP를 사용
• 인터넷에 연결된 모든 노드들을 식별(구별)하기 위해 32비트로 구성된 주소 체계
• IP 프로토콜 : 소스 호스트에서 목적지 호스트까지 전송되는 데이터그램의 경로를 설정
(path determination)하고, 순방향 전송(Forwarding)하는 기능
• 현재 사용 중인 인터넷 프로토콜은 버전4(IPv4), 차세대 인터넷 프로토콜은 IPv6 예정

### IPv4 프로토콜의 특성
1. 비연결성 서비스 제공
- 소스 호스트에서 데이터 그램을 전송할 때 목적지 호스트까지
연결 설정 없이 데이터를 보냄
→ 전송된 데이터 그램이 목적지 호스트에 순서가 바뀌거나
다른 경로를 통해 전송될 수 있음

2. 최선형(Best-Effort) 서비스 제공
- IP 데이터 그램은 전송되는 데이터의 특성에 따라 차별화 되어 전송되지 않음
• 데이터 그램을 전송함에 있어 최선을 다하지만 전송을 보장하지 않음
→ 전송된 패킷이 전송 중에 손실되거나 순서가 바뀌어 전송될 수 있음

3. 비신뢰성 서비스 제공
- 소스 호스트로부터 전송된 데이터그램은 전송 중에 손실, 중복, 지연
또는 부적절하게 목적지 호스트에 전달될 수 있음

4. 비보안성
- 보안을 위한 암호화나 인증이 지원되지 않음

###  IP 주소 체계 (1)
03. 인터넷 프로토콜
• 인터넷 주소는 32비트(4바이트)로 이루어져 있음
• IP 주소는 해당 호스트가 연결되는 인터페이스에 할당
→ 호스트가 바뀌더라도 동일한 인터페이스에 연결되면 같은 주소를 가짐
• 인터넷 주소 : 32비트로 구성
→ 전체 232개의 IP 주소 가능
→ 8비트씩 점으로 구분되어 10진법으로 표현


IP 주소 : 네트워크 주소 + 호스트 주소
* IPv4 주소 = 네트워크 식별자(netid) + 호스트 식별자(hostid)
• IP 주소는 클래스를 가짐
→ 32비트 중 앞의 첫 바이트를 통해 클래스 구분
IP주소를 3개의 클래스로 나누는 이유는 네트워크 크기에 따른 구분이라 생각하면 쉽습니다. 
하나의 네트워크에서 몇개의 호스트 IP까지 가질 수 있는가에 따라서 클래스를 나눌 수 있습니다.
### IP 주소 클래스
- IP 주소 클래스는 주로 네트워크의 크기를 나타내기 위해 사용되었던 예전의 방식 중 하나입니다.
-  그러나 현재는 Classless Inter-Domain Routing (CIDR)과 함께  IP 주소를 보다 유연하게 효율적으로 할당할 수 있게 해줍니다. 
-  보통 A, B, C 3개 정도만 알고있으면 충분합니다
-  (나머지 D,  클래스는 멀티캐스트용 첫번째 바이트의 첫 4비트가 ‘1110’,
-   E는 연구용으로 사용합니다.) E는 특별한 목적으로 예약된 주소 첫번째 바이트의 첫 4비트가 ‘1111’
-  32비트 주소에서 첫 . 까지를 첫 옥텟   두번 째 . 까지를 두 옥텟까지라고 합니다.
-  A는 첫 옥텟까지, B는 2 옥텟, C는 3 옥텟 까지 네트워크 주소로 사용합니다.
### A클래스 예시 
- 여기서 127은 제외됩니다. 이건 약속입니다.
- 예를 들어 A클래스로 13.0.0.0 네트워크 주소를 할당 받았다고 합시다.
-  여기서 13. 은 네트워크 부분이죠? 나머지 0.0.0 에 호스트 IP를 할당 할 수 있습니다.
-   십진수 0.0.0 은 2진수로 표현하면 총 24개의 2진수로 표현이 가능하고 이는 곧 2^24 개의 호스트 IP를 가질 수 있다는 뜻입니다. 

- 십진수로 나타내면 13.0.0.0 ~ 13.255.255.255 입니다.
- 하지만 여기서 13.0.0.0 은 네트워크 주소를 표현하기 위해서 호스트IP로 사용하면 안됩니다.
-  또, 13.255.255.255 역시 브로드캐스트 주소로 사용하기 때문에 호스트 IP로 사용하면 안됩니다.
-   따라서 (2^24) - 2 를 해주는 것입니다. A클래스에 대해서 모두 배웠습니다. B클래스, C클래스도 같은 원리입니다.

### 내 컴퓨터 주소
-   127.0.0.1"은 로컬 호스트를 나타냅니다. 127.0.0.1은 컴퓨터 자체를 가리키는 IP 주소로, 자기 자신과 통신할 때 사용됩니다.
-    이 IP 주소는 로컬 루프백(localhost) 주소로도 알려져 있습니다.
-    호스트 127.0.0.1을 사용하여 자신의 컴퓨터에 서버를 설정하거나 로컬에서 어떤 서비스에 접속할 때 유용하게 활용될 수 있습니다.

### IP 데이터그램의 형식
- IP 계층의 프로토콜 데이터 유니트(PDU)
- 가변 길이의 헤더 + 페이로드(Payload)로 구성
- IPv4 데이터그램의 구조 및 IP 데이터그램 헤더의 주요 필드의 의미
 ![image](https://github.com/jyzayu/TIL/assets/55649979/2f443eef-ddc4-4d82-a68c-f7d4b6191d82)

 버전
- 4비트, 프로토콜의 버전
- IPv4 데이터그램의 버전 필드는 0100
• 헤더 길이
- IPv4 데이터그램 헤더 길이는 20~60 바이트까지 가변
- 32 비트의 워드(word)로 표현
- 데이터그램이 옵션 필드 없이 20바이트의 헤더를 가지면 헤더 길이 필드는 ‘0101

• 서비스 타입
- 서비스의 질을 보장하기 위한 필드
- 우선순위, 지연, 처리율, 안정도 등을 나타낼 때 사용
• 전체 길이
- 바이트로 표시, 16비트로 이루어짐
- 최대 IP 데이터그램 길이는 65,535바이트, 최소 데이터그램 길이는 기본 헤더만 있는 20바이트
  • 구분자(=식별자, identifier)
- 플래그, 단편화 오프셋과 더불어 IP 데이터그램의 단편화와 관련
- 단편화 된 데이트그램들이 원래 같은 데이터그램에 속하였음을
알려주어 재조립에 사용
• TTL(Time To Live)
- 데이터그램이 노드를 경유할 수 있는 횟수를 나타냄
- 데이터그램이 영원히 네트워크에 내에서 순환되는 것을 막음
- 이 값은 라우터를 거칠 때마다 1씩 감소, 0이 되면 폐기
  • 프로토콜(Protocol)
- IP 데이터그램이 전달되야 하는 상위 계층의 프로토콜
- 상위 프로토콜이 TCP면 필드의 값은 6, UDP면 17
• 검사합(Check Sum)
- 라우터가 IP 데이터그램을 받았을 때 비트 에러를 찾는데 사용
- 일반적으로 라우터는 에러가 발생한 데이터그램을 폐기
• 소스 주소(Source Address), 목적지 주소(Destination Address)
- 소스 호스트와 목적지 호스트를 나타내는 32비트 주소 필드
• 옵션(Options)
- IP 헤더의 확장 부분
- 헤더의 오버헤드 문제와 소스 호스트와 목적지 호스트 간의
복잡한 옵션 처리 문제 등으로 거의 사용하지 않음
• 데이터
- 전송되는 데이터 혹은 제어 정보 등

  ### 단편화와 재조립
  단편화(fragmentation)
- 전송 호스트에서 전송된 데이터그램은 라우터를 통해 서로 다른 네트워크로전송될 수 있음
- 예) 이더넷 → 토큰링 → FDDI
- 각 네트워크에서는 전송되는 최대 프레임 크기가 정해져 있음
- 단편화 : 데이터그램이 서로 다른 네트워크를 통해 전송되기 위해 더 작은 MTU로 나뉘는 것

- Maximum Transfer Unit
- 각 네트워크에서 사용하는 최대 패킷 크기
![image](https://github.com/jyzayu/TIL/assets/55649979/f09ab2d5-c592-405c-8020-659b1e2690ee)

![image](https://github.com/jyzayu/TIL/assets/55649979/55f6ffec-e50f-4dc9-ac3c-d0d60eabace9)




  
